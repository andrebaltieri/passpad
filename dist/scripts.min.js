const keys = { upperCase: "ABCDEFGHIJKLMNOPQRSTUVWXYZ", lowerCase: "abcdefghijklmnopqrstuvwxyz", number: "0123456789", symbol: "!@#$%^&*()_+~\\`|}{[]:;?,./-=" }, getKey = [function () { return keys.upperCase[Math.floor(Math.random() * keys.upperCase.length)] }, function () { return keys.lowerCase[Math.floor(Math.random() * keys.lowerCase.length)] }, function () { return keys.number[Math.floor(Math.random() * keys.number.length)] }, function () { return keys.symbol[Math.floor(Math.random() * keys.symbol.length)] }], months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], length = 20, passwordInput = document.getElementById("password-input"), autoCopyCheckbox = document.getElementById("autocopy"), storePasswordsCheckbox = document.getElementById("store"), saveSettingsCheckbox = document.getElementById("savesettings"), passwordListUl = document.getElementById("password-list"), snackbar = document.getElementById("snackbar"), storedPasswordsPanel = document.getElementById("storedpasswords"); function createPassword() { let a = ""; for (; a.length < 20;)a += (0, getKey[Math.floor(Math.random() * getKey.length)])(); !0 == storePasswordsCheckbox.checked && addPasswordToList(a), passwordInput.value = a, autoCopyCheckbox.checked && copyToClipboard() } function addPasswordToList(b) { var c = `${b}<br><small><strong>${getCurrentDateTimeSnapshot()}</strong></small>`, a = document.createElement("li"); a.innerHTML = c, a.addEventListener("click", () => handleLiClick(b)), passwordListUl.appendChild(a) } function handleLiClick(a) { passwordInput.value = a, copyToClipboard(a) } function getCurrentDateTimeSnapshot() { let a = new Date; return `${a.getDay()}/${months[a.getMonth()]} at ${a.getHours()}:${a.getMinutes()}:${a.getSeconds()}` } function copyToClipboard(a) { ("" === a || void 0 === a) && (a = passwordInput.value), navigator.clipboard.writeText(a), snackbar.className = "show", snackbar.innerHTML = `${a} copied to clipboard`, setTimeout(function () { snackbar.className = snackbar.className.replace("show", "") }, 3e3) } function loadSettings() { let a = localStorage.getItem("settings.autoCopy"), b = localStorage.getItem("settings.storePasswords"), c = localStorage.getItem("settings.saveSettings"); autoCopyCheckbox.checked = "true" === a, storePasswordsCheckbox.checked = "true" === b, saveSettingsCheckbox.checked = "true" === c } function saveSettings() { saveSettingsCheckbox.checked && (localStorage.setItem("settings.autoCopy", autoCopyCheckbox.checked), localStorage.setItem("settings.storePasswords", storePasswordsCheckbox.checked), localStorage.setItem("settings.saveSettings", saveSettingsCheckbox.checked)) } const loaded = () => { createPassword(), loadSettings() }; document.addEventListener("DOMContentLoaded", loaded), "serviceWorker" in navigator && window.addEventListener("load", async () => { await navigator.serviceWorker.register("service-worker.js") })